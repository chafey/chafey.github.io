---
layout: post
title:  "Medical Image Compression Part 3 - brief history of image compression"
date:   2019-11-18 02:00:00 +0000
---

In the prior articles, we discussed entropy encoding, RLE, pattern matching and how they are used in the general purpose deflate algorithm. While these general-purpose techniques work with images, higher compression ratios can be achieved by applying data transformations that are designed specifically for images. 

One of the popular early image compression formats was Graphics Interchange Format (GIF) which was created by CompuServe, the largest and most popular online system in the 1980’s (before the internet became popular). CompuServe obtained a patent on GIF in 1985 which prompted the industry to form the Joint Photographic Experts Group (JPEG) whose goal was to provide standards for image compression that were not controlled by any given vendor. 

The JPEG committee’s first standard is referred to as "JPEG Baseline" and produced smaller files than GIF (due to using lossy compression, GIF was lossless) and more colors (16.8 million colors vs GIF’s 256 colors). The release of the JPEG baseline standard occurred in 1992 which happened to align with the development of the world wide web. While the world wide web was first released in 1991, graphics were not frequently used due to how large they were and how little bandwidth was available (14.4 kbps modems were the best you could buy at the time). The addition of JPEG baseline to the world wide web enabled rapid access to high quality color images. This immediately raised the impact of the world wide web accelerating its adoption. I still remember when I installed Mosaic (the first web browser) for the first time in 1992 and navigated to one of the very few sites that had color images (there were less than 100 total web sites in the entire world at this time). It was an absolutely mind-blowing experience and it was obvious that the world wide web would change the world. I sincerely believe that JPEG was one of the keys to making the world wide web the success it is today.

While JPEG provided good lossy compression for 8-bit color images, there were many other needs that it did not support – specifically around higher bit depths, progressiveness, higher compression ratios and lossless compression. The JPEG standard committee responded by created a number of new standards to address each of these needs independently. Unfortunately, the large number of unique JPEG standards overwhelmed the industry creating a huge interoperability problem. You could not simply claim JPEG compliance – instead you had to specify exactly which of the 20+ JPEG standards you supported. DICOM actually added support for many of these variations, but many of them have since been retired due to lack of use. The original JPEG standards still in common use include JPEG baseline (for 8 bit lossy images), JPEG Lossless (older archives use this), JPEG-LS (modern archives use this).

Around the same time these interoperability issues became apparent, a new transformation called the discrete wavelet transformation (DWT) emerged that not only produced higher compression ratios than DCT (the transform used in JPEG), but also enabled progressive image display without any additional cost.  In response to DWT and the interoperability issues, the JPEG standard committee decided to create a new standard called JPEG 2000 which used the superior DWT and would have features that addressed all of the industry needs. JPEG 2000 was intended to replace all of the original JPEG standards – it was the future of imaging – truly the “the one image compression standard to rule them all”.

![](lotr-one-ring.png)

Despite the benefits of JPEG 2000, it never caught on the way it was expected to and we find ourselves still using the 1992 version of JPEG baseline predominantly, yet the needs addressed by JPEG 2000 still exist some of which have been met with non-JPEG formats. To address the need for lossless color Imaging, PNG was created and is now the main format for lossless image. Other image formats such as Google’s WebP, Microsoft’s HD Photo and HEIC are better than JPEG and PNG but none have gained enough momentum yet to displace either.

JPEG 2000 was once believed to be the future of medical imaging as well. It features excellent compression ratios (better than all other transfer syntaxes), supports all pixel formats, supports lossy and lossless images and even supports progressive image display. In medical imaging, it could absolutely be the one image compression format to rule them all. DICOM quickly added support for JPEG 2000 and many archive vendors added support. Despite the early excitement and adoption, it hasn't been used in practice as much as was originally expected. Today most archives should support JPEG 2000, but only a subset of viewers do and it is often not preferred. The industry in general has been moving away from using JPEG 2000 and the preferred transfer syntax for archiving is now JPEG-LS.

JPEG 2000 has lost favor to JPEG-LS for three reasons. First, JPEG-LS is significantly faster to encode and decode. Second, the progressive functionality of JPEG 2000 is rarely used. Third, the free/open source versions of JPEG 2000 have historically had numerous performance and quality issues forcing vendors to license libraries from third parties. The third issue has mostly gone away as the OpenJPEG library is getting fairly close to commercial offerings in terms of performance and quality. The value of progressive image transmission is still highly desired but not enough to overcome the higher computational cost of JPEG 2000 and the added complexity associated with the client/server protocol to fully utilize it. We will explore progressive image transmission in a future article, but next we will explore the explore the impact of image compression to IT systems and finance.